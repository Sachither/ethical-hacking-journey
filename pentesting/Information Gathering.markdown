# Information Gathering

Information gathering is the first stage in penetration testing, involving the collection of as much data as possible about the target, its information systems, and its architecture.

## Types of Information Gathering

### Passive Information Gathering
Passive information gathering involves collecting data about a target without direct interaction with its digital infrastructure. It relies on **Open Source Intelligence (OSINT)** or publicly available information to map out the organization’s systems and structure.

### Active Information Gathering
Active information gathering involves direct interaction with the target’s systems. This includes techniques like social engineering, probing servers, and scanning for open ports.

## Objectives
The main objective of information gathering is to create a blueprint of the target’s organizational structure, network, and host information. This helps:
- Orchestrate the next steps of the penetration test effectively.
- Understand the overall security posture of the target’s network or infrastructure.

## Types of Information Gathered
- **Network and Host-Based Information**:
  - Network ranges used by the company (IP blocks).
  - DNS names, top-level domains, subdomains, name servers, and mail servers.
  - Software used on websites, client systems, or employee desktops.
- **Employee Information**:
  - Names, emails, phone numbers, identity details.
  - Roles within the company and access to critical information.
  - Personal interests for targeted attacks (e.g., spear phishing).

## Information Gathering Techniques and Tools

### WHOIS
WHOIS is a query and response protocol that provides registrant information for domains or IP blocks.
- **Key Information Sought**:
  - Owner’s name and contact email for phishing or spear phishing campaigns.
  - Nameservers and DNSSEC configuration.
- **Example Command**:
  ```bash
  whois example.com
  ```

### Email Harvesting
Email harvesting involves collecting email addresses associated with a target.
- **Tool**: theHarvester (a passive information gathering tool).
- **Example Command**:
  ```bash
  theHarvester -d hackersploit.org -l 500 -b bing
  ```

### Maltego
Maltego is a powerful OSINT tool for visualizing relationships between entities (e.g., domains, emails, people).

[Image Placeholder]

### OSRFramework
OSRFramework is a suite of tools for OSINT tasks.
- **Installation**:
  ```bash
  sudo apt install osrframework
  ```
- **Tools**:
  - `alias_generator`: Generates candidate usernames based on known information.
  - `checkfy`: Verifies if an email address matches a pattern.
  - `domainfy`: Checks domain name availability.
  - `mailfy`: Retrieves information about email accounts.
  - `phonefy`: Looks for spam-related information linked to phone numbers.
  - `searchfy`: Queries multiple platforms.
  - `usufy`: Searches for accounts with given nicknames.

### Subdomain Enumeration with Sublist3r
Sublist3r is used to discover publicly available subdomains.
- **Installation**:
  ```bash
  git clone https://github.com/aboul3la/Sublist3r.git
  cd Sublist3r
  python3 -m venv sublist3r_venv
  source sublist3r_venv/bin/activate
  pip install -r requirements.txt
  sudo ln -sf $(pwd)/sublist3r.py /usr/bin/sublist3r
  ```
- **Usage**:
  ```bash
  sublist3r -d example.com
  ```

### Google Dorking
Google Dorking (or Google Hacking) is a passive footprinting technique that uses specialized search operators to uncover vulnerabilities, data exposures, or security misconfigurations.
- **Example Queries**:
  - `site:example.com filetype:pdf`: Finds PDF files on the target domain.
  - `inurl:login site:example.com`: Identifies login pages.
  - `intitle:"index of" site:example.com`: Reveals exposed directories.

### DNS Enumeration and Zone Transfers
DNS enumeration involves querying DNS records to gather information about IP addresses, mail servers, and subdomains.
- **Zone Transfers**: A legitimate technique used by DNS server admins to copy records from a primary to a secondary name server.
- **Tools and Commands**:
  - **host**:
    ```bash
    host zonetransfer.me
    ```
    [Image Placeholder]
    ```bash
    host -t ns zonetransfer.me
    ```
    [Image Placeholder]
  - **dig**:
    ```bash
    dig zonetransfer.me
    ```
    [Image Placeholder]
    ```bash
    dig -t ns zonetransfer.me
    ```
    [Image Placeholder]
    ```bash
    dig axfr zonetransfer.me @nsztm1.digi.ninja
    ```
  - **dnsenum**:
    ```bash
    dnsenum zonetransfer.me
    ```

### DNS Brute-Forcing and Subdomain Enumeration with Fierce & Nmap
- **Nmap**:
  ```bash
  nmap -p 53 --script dns-brute zonetransfer.me
  ```
  [Image Placeholder]
- **dnsmap**:
  ```bash
  dnsmap zonetransfer.me -w /home/kali/wordlist-tools/SecLists/Discovery/DNS/dns-Jhaddix.txt
  ```
  [Image Placeholder]
- **fierce**:
  ```bash
  fierce --domain zonetransfer.me --subdomain-file /home/kali/wordlist-tools/SecLists/Discovery/DNS/fierce-hostlist.txt
  ```
  [Image Placeholder]